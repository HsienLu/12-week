
# 12 週計畫追蹤器（無資料庫版）— 產品規格

## 1. 目標 & 範疇
- **目標**：提供一個單檔（HTML）離線工具，讓使用者以 12 週為單位追蹤四大目標並計算週達成率與整體表現。
- **不含**：雲端同步、多使用者、伺服器端儲存或登入權限。

## 2. 使用者故事
1. 我想每週填「運動次數、攝影是否發文、閱讀% 進度、履歷% 進度」，自動算出**本週達成率**。
2. 我想看到「**本期平均**」與「**連續達標週數**」來維持動力。
3. 我想把資料**匯出/匯入** JSON，換裝置也能延續。
4. 我不想註冊或連網，**離線**就能用。
5. 我想把工具**嵌到 Notion**（/embed）或放在 GitHub Pages。

## 3. 功能需求（FR）
### FR-1 週資料輸入
- 欄位（每週）：
  - `運動完成次數`：整數 0–3
  - `攝影發文`：布林（勾選=有發文）
  - `閱讀進度%`：整數 0–100
  - `履歷進度%`：整數 0–100
- 共 **12 週**（Week 1 ~ Week 12）。

### FR-2 計算與顯示
- **本週達成率（%）**  
  公式：`((運動/3) + (攝影：打勾=1) + (閱讀%/100) + (履歷%/100)) / 4 × 100`（顯示為四捨五入整數）
- **本週狀態**：
  - `≥ 80%` → `On Track`
  - `50–79%` → `At Risk`
  - `< 50%` → `Off Track`
- **本期平均**：12 週分數平均（預設僅計入已輸入的週；全未填顯示 0）
- **連續達標週數**：連續達到 `≥80%` 的最長段落。

### FR-3 資料持久化
- 使用 **localStorage** 儲存，key：`twelve_week_tracker_v1`
- 初次載入無資料時，初始化 12 週預設值。
- 任何欄位變更即時寫入 localStorage。

### FR-4 匯入/匯出
- **匯出**：下載 `12-week-tracker.json`，內容為 12 週陣列（見 §8）。
- **匯入**：讀取 JSON 檔並覆蓋當前資料；格式不符時顯示警示且不覆蓋。

### FR-5 重設
- 提供「清空全部」按鈕，二次確認後清除 localStorage 並重繪。

### FR-6 響應式 UI
- 桌機顯示多欄網格；平板/手機自動改 2 欄/1 欄。

## 4. 非功能需求（NFR）
- **離線可用**：單一 HTML 檔可執行，無外部依賴。
- **效能**：輸入更新到畫面重繪 < 50ms（中等裝置）。
- **相容性**：Chrome / Edge / Safari（近兩版）；行動版 iOS/Android 主流瀏覽器。
- **可存取性**：表單元素具 `label`，支援鍵盤操作。
- **隱私**：僅使用 localStorage，不對外傳輸。
- **安全**：無第三方腳本；僅本機檔案匯入/匯出。

## 5. 介面與互動（UI/UX）
- **頂部資訊卡**：標題、副標（目標說明）、本期平均、連續達標、匯入/匯出/重設按鈕。
- **週卡片（12 個）**：
  - 標題：第 X 週
  - 狀態徽章 + 本週達成率 %
  - 四個輸入：運動（0–3）、攝影（checkbox）、閱讀%(0–100)、履歷%(0–100)
  - 進度條（本週達成率視覺化）
- **行為**：
  - 任一輸入 onChange → 重新計算 + 儲存 + 重繪
  - 匯出 → 下載 JSON
  - 匯入 → 選檔→驗證→套用→重繪
  - 清空全部 → confirm 後清除

## 6. 規則與驗證
- 運動次數：只接受 0–3；超出自動截到範圍。
- 百分比欄位：只接受 0–100；超出自動截到範圍。
- 匯入非 JSON 或陣列長度 ≠ 12 → 錯誤提示。

## 7. 計算邏輯（偽碼）
```text
score(week):
  a = clamp(int(workout), 0, 3) / 3
  b = photo ? 1 : 0
  c = clamp(int(reading), 0, 100) / 100
  d = clamp(int(resume), 0, 100) / 100
  return ((a + b + c + d) / 4) * 100

overallAverage(weeks):
  valid = weeks where any field is filled (或全數皆計算皆可，預設計入有填寫的週)
  if valid.count == 0 -> 0
  return round(sum(score(w))/valid.count)

bestStreak(weeks):
  cur=0; best=0
  for w in weeks:
    if score(w) >= 80: cur++; best=max(best,cur)
    else: cur=0
  return best
```

## 8. 資料結構（JSON）
```json
[
  {
    "week": 1,
    "workout": 0,
    "photo": false,
    "reading": 0,
    "resume": 0
  }
  // ... 共 12 週
]
```

## 9. 檔案與技術
- **單一檔**：`index.html`（內嵌 CSS / JS）
- **儲存 key**：`twelve_week_tracker_v1`
- **無相依**：無 CDN、無第三方套件

## 10. 可存取性（A11y）
- 具 `label`、鍵盤可達；對比度 ≥ WCAG AA；提供計算公式與狀態說明。

## 11. 國際化（i18n）
- 目前文案：繁體中文；未來可以 `strings` 物件抽換。

## 12. 錯誤處理
- 匯入格式錯誤：顯示 alert「匯入失敗：JSON 內容不正確」
- localStorage 寫入失敗（極少）：顯示提示「儲存失敗，請確認瀏覽器允許儲存」

## 13. 測試案例（擷取）
- [輸入] 3/✔/100/100 → 100%，On Track
- [輸入] 0/✘/0/0 → 0%，Off Track
- [邊界] 運動=5 → 3；閱讀=-10 → 0；履歷=150 → 100
- [持久] 重新整理後保留資料
- [匯出/匯入] 匯出後清空→匯入→資料還原
- [響應式] 小於 560px 單欄正常

## 14. 驗收標準（UAT）
- 單檔於 Chrome/Edge/Safari 打開即可操作；0.5 秒內更新計算與進度條。
- 匯出/匯入穩定且無資料遺失；清空後回到初始狀態。
- 平均與連續達標計算與手工對照一致。

## 15. 可選擴充（V2+）
- 自訂週期開始日、顯示每週日期範圍
- 週筆記（反思區）、圖片上傳（前端）
- 主題切換（深色模式）
- PWA（安裝到桌面、離線快取）
- 多專案切換（不同 storage key）
